(function(e,a){e.dom=function(f){if(typeof(f)!=="string"){if((f instanceof Array)||(f[0]&&f.length)){return[].slice.call(f)}else{return[f]}}if(!e.__create_dom_div__){e.__create_dom_div__=a.createElement("div")}e.__create_dom_div__.innerHTML=f;return[].slice.call(e.__create_dom_div__.childNodes)};var d='<div class="mui-poppicker">		<div class="mui-poppicker-header">			<button class="mui-btn mui-poppicker-btn-cancel">取消</button>			<button class="mui-btn mui-btn-blue mui-poppicker-btn-ok">确定</button>			<div class="mui-poppicker-clear"></div>		</div>		<div class="mui-poppicker-body">		</div>	</div>';var b='<div class="mui-picker">		<div class="mui-picker-inner">			<div class="mui-pciker-rule mui-pciker-rule-ft"></div>			<ul class="mui-pciker-list">			</ul>			<div class="mui-pciker-rule mui-pciker-rule-bg"></div>		</div>	</div>';var c=e.PopPicker=e.Class.extend({init:function(g){var f=this;f.options=g||{};f.options.buttons=f.options.buttons||["取消","确定"];f.panel=e.dom(d)[0];a.body.appendChild(f.panel);f.ok=f.panel.querySelector(".mui-poppicker-btn-ok");f.cancel=f.panel.querySelector(".mui-poppicker-btn-cancel");f.body=f.panel.querySelector(".mui-poppicker-body");f.mask=e.createMask();f.cancel.innerText=f.options.buttons[0];f.ok.innerText=f.options.buttons[1];f.cancel.addEventListener("tap",function(h){f.hide()},false);f.ok.addEventListener("tap",function(i){if(f.callback){var h=f.callback(f.getSelectedItems());if(h!==false){f.hide()}}},false);f.mask[0].addEventListener("tap",function(){f.hide()},false);f._createPicker();f.panel.addEventListener(e.EVENT_START,function(h){h.preventDefault()},false);f.panel.addEventListener(e.EVENT_MOVE,function(h){h.preventDefault()},false)},_createPicker:function(){var f=this;var j=f.options.layer||1;var k=(100/j)+"%";f.pickers=[];for(var h=1;h<=j;h++){var l=e.dom(b)[0];l.style.width=k;f.body.appendChild(l);var g=e(l).picker();f.pickers.push(g);l.addEventListener("change",function(m){var o=this.nextSibling;if(o&&o.picker){var i=m.detail||{};var n=i.item||{};o.picker.setItems(n.children)}},false)}},setData:function(g){var f=this;g=g||[];f.pickers[0].setItems(g)},getSelectedItems:function(){var g=this;var f=[];for(var j in g.pickers){var h=g.pickers[j];f.push(h.getSelectedItem()||{})}return f},show:function(g){var f=this;f.callback=g;f.mask.show();a.body.classList.add(e.className("poppicker-active-for-page"));f.panel.classList.add(e.className("active"));f.__back=e.back;e.back=function(){f.hide()}},hide:function(){var f=this;if(f.disposed){return}f.panel.classList.remove(e.className("active"));f.mask.close();a.body.classList.remove(e.className("poppicker-active-for-page"));e.back=f.__back},dispose:function(){var f=this;f.hide();setTimeout(function(){f.panel.parentNode.removeChild(f.panel);for(var g in f){f[g]=null;delete f[g]}f.disposed=true},300)}})})(mui,document);