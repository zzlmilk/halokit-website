new loader(["/dist/js/jq.js","/dist/js/base.js","/dist/js/myalert.js"],function(e){function d(e,d){d=d?d:0;var i=l.find("#"+e+" .block").eq(d);$(".tip-price").html("商品下架"),h=i.data("id"),i.addClass("checked").siblings().removeClass("checked"),s.find("."+i.data("color")).eq(0).trigger("touchend"),i.hasClass("disabled")||$(".tip-price").html(i.data("price")+"元"),$(".color-board").hide(),$("#"+e).show(),$("#"+e+" .checked:not(.disabled)").length<1?$("#add-to-cart").addClass("disabled"):$("#add-to-cart").removeClass("disabled")}var i=$(window||this),s=$("#ringCon"),a=s.find("li"),t=a.length,n=i.width()/3,o='{"-webkit-transform": "translate3d(-${x}px, 0, 0)","-moz-transform": "translate3d(-${x}px, 0, 0)","-o-transform": "translate3d(-${x}px, 0, 0)","transform": "translate3d(-${x}px, 0, 0)"}',c={init:function(){this.itemWidth(),s.append(a.first().clone()),s.prepend(a.last().clone()),a=s.find("li"),a.eq(1).addClass("ring-scale")},itemWidth:function(){n=i.width()/3,a.width(n)},change:function(){var e=$(this),d=e.index();if(console.log(d),!e.is(".ring-scale")){if(0===d&&c.move(a.eq(t),(t-1)*n),d===t+1)return void c.move(a.eq(1),0);if(d>0&&d<t+1)return void c.move(e,(d-1)*n)}},move:function(e,d){s.css(JSON.parse(o.replace(/\${x}/g,d))),s.find(".ring-scale").removeClass("ring-scale"),e.addClass("ring-scale")}};c.init(),i.on("resize",c.itemWidth),s.on("touchend","li",c.change);var l=$("#selection"),r=l.find(".choose-size").first().addClass("checked").data("id"),h=(new Base.template,null),f="/h5/cart?id=";d(r,0),l.on("touchend",".choose-size",function(e){$(this).addClass("checked").siblings().removeClass("checked");var i=$(this).data("id");d(i,0)}).on("touchend",".color-board .block",function(e){$(this).addClass("checked").siblings().removeClass("checked"),h=$(this).data("id"),$(".tip-price").html("商品下架"),$(this).hasClass("disabled")?$("#add-to-cart").addClass("disabled"):($(".tip-price").html($(this).data("price")+"元"),$("#add-to-cart").removeClass("disabled")),s.find("."+$(this).data("color")).eq(0).trigger("touchend")}).on("touchend","#add-to-cart",function(e){$(this).hasClass("disabled")||(window.location.href=f+commodity_id+"&sku="+h)})}).jsLoader();