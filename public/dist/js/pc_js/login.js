function callback(e){$.get("/login/qq?openid="+e.openid,function(e){$("#username span").text(e.nickname)})}!function(e){"use strict";var n=e("#login"),o=e("#register"),t=function(){var t=e(".error"),i=e("#mask"),c=e(".ipt-item"),r=e(".close-btn"),s=e("#before-login"),a=e("#after-login"),l=function(){i.hide(),n.hide(),o.hide(),t.empty(),c.val("")};return{openLogin:function(){return i.show(),n.show(),r.click(function(){l()}),i.click(function(){l()}),!1},toOpenRegister:function(){n.hide(),o.show()},login:function(){var n={password:this.checkPassword(),phone:this.checkPhone()};n.phone&&n.password&&(t.attr({style:"color: #bcc91c"}).html("登录中，请稍后..."),e.ajax({url:"/login/login",type:"POST",dataType:"json",data:n,success:function(e){e.status?(l(),s.hide(),a.removeClass("none").find("#username span").html(e.data.username)):t.attr({style:"color: red"}).html(e.msg)},error:function(e){t.attr({style:"color: red"}).html("登录失败，请重试")}}))},checkPhone:function(){var n=e("#phone"),o=n.val().replace(/^\s+$/gi,"");return o?/^1(3|4|5|7|8)[0-9]\d{8}$/.test(o)?o:(t.html("请输入正确的手机号!"),n.focus(),!1):(t.html("手机号不能为空!"),n.focus(),!1)},checkPassword:function(){var n=e("#password"),o=n.val().replace(/^\s+$/gi,"");return o?/^\w{6,20}$/.test(o)?o:(t.html("密码错误，请重新输入!"),n.focus(),!1):(t.html("密码不能为空!"),n.focus(),!1)}}}();e("#to-login").click(function(){t.openLogin()}),e("#login-to-register").click(function(){t.toOpenRegister()}),n.on("click",".login-btn",function(){t.login()}),document.body.onkeydown=function(e){13===e.keyCode&&t.login()},e("#qqlogin").click(function(e){var n=["https://graph.qq.com/oauth2.0/authorize","?response_type=token","&client_id=","101348052","&redirect_uri=",encodeURIComponent("http://halokit.cn/login/redirect")];window.location.href=n.join("")});var i=window.location.hash.slice(1);if(i){var c=null;try{c=i.split("&")[0].split("=")[1]}catch(r){console.log(r)}if(c){e.cookie("access_token",c,{expires:1});var s=document.createElement("script");s.type="text/javascript",s.charset="UTF-8",s.src="https://graph.qq.com/oauth2.0/me?access_token="+c,document.getElementsByTagName("head")[0].appendChild(s)}}i.indexOf("unlogin")!=-1&&t.openLogin()}(jQuery);