$(function(e){var t=$("#register"),r=$("#login"),c=function(){var e=$(".reError"),c=$(".ipt-item"),s=$("#mask"),o=function(){s.hide(),t.hide(),r.hide(),e.empty(),c.val("")};return{openRegister:function(){return s.show(),t.show(),$(".close-btn").click(function(){o()}),s.click(function(){o()}),!1},register:function(){var c={rePassword:this.checkRePassword(),newPassword:this.checkNewPassword(),reCaptcha:this.checkCaptcha(),rePhone:this.checkRePhone()};c.rePhone&&c.reCaptcha&&c.newPassword&&c.rePassword&&(e.attr({style:"color: #bcc91c"}).html("注册中，请稍后..."),$.ajax({url:"/register/register",type:"POST",dataType:"json",data:c,success:function(c){c.status?(e.css("color","#bcc91c").html("注册成功，跳转登录..."),t.fadeOut(800),r.show()):e.attr({style:"color: red"}).html(c.msg)},error:function(t){e.attr({style:"color: red"}).html("注册失败，请重试")}}))},checkRePhone:function(){var t=$("#rePhone"),r=t.val().replace(/^\s+$/gi,"");return r?/^1(3|4|5|7|8)[0-9]\d{8}$/.test(r)?r:(e.html("请输入正确的手机号!"),t.focus(),!1):(e.html("手机号不能为空"),t.focus(),!1)},checkCaptcha:function(){var t=$("#reCaptcha"),r=t.val().replace(/^\s+$/gi,"");return r?/^\d{4}$/.test(r)?r:(e.html("请正确输入验证码!"),t.focus(),!1):(e.html("验证码不能为空"),t.focus(),!1)},checkNewPassword:function(){var t=$("#newPassword"),r=t.val().replace(/^\s+$/gi,"");return r?/^\w{6,20}$/.test(r)?r:(e.html("密码格式错误，请重新填写!"),t.focus(),!1):(e.html("密码不能为空，请填写注册密码"),t.focus(),!1)},checkRePassword:function(){var t=$("#rePassword"),r=$("#newPassword"),c=r.val().replace(/^\s+$/gi,""),s=t.val().replace(/^\s+$/gi,"");return s!=c?(e.html("请确认两次输入的密码一样!"),t.focus(),!1):s}}}();$("#captcha-btn").click(function(e){var t=c.checkRePhone();t&&$.get("http://127.0.0.1:3001/ali/dayu/"+t,function(e){e.status?alert("验证码已经发送"):alert(e.msg)})}),$("#to-register").click(function(){c.openRegister()}),t.on("click",".register-btn",function(){c.register()})});